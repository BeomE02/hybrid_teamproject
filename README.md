

# 🧰 스마트 측정 & 구조 도구 (Smart Tools & SOS Kit)

> **"설치 없이 1초 만에 실행되는 올인원 생존/측정 키트"** \> 웹 브라우저만으로 스마트폰의 하드웨어 센서를 극한까지 활용한 PWA 기반 웹 애플리케이션입니다.

## 📖 프로젝트 소개 (Overview)

이 프로젝트는 긴급한 상황이나 일상생활에서 필요한 도구들을 별도의 앱 설치 과정 없이 **URL 접속만으로 즉시 사용**할 수 있도록 개발되었습니다.
스마트폰에 내장된 \*\*5가지 핵심 센서(가속도, 지자기, GPS, 카메라, 자이로)\*\*를 웹 표준 기술(Web API)로 제어하여, 정밀한 측정 기능과 위급 상황 시 생명을 구하는 구조 신호 기능을 제공합니다.

-----

## 🚀 주요 기능 (Key Features)

### 1\. 📏 스마트 수평계 (Smart Level)

  * **듀얼 모드 (Dual Mode):**
      * **평면(Surface):** 책상이나 바닥의 전체적인 기울기를 원형 물방울로 시각화.
      * **막대형(Bar):** 폰을 세우거나 눕혔을 때 자동으로 축을 감지하여 가로/세로 수평 측정.
  * **기울기 알림 (Tilt Alarm):** 수평이 맞지 않을 때 \*\*진동(Haptic)\*\*과 \*\*비프음(Beep)\*\*으로 경고 (On/Off 가능).
  * **정밀 보정:** 현재 상태를 0도로 맞추는 **0점 조절(Calibration)** 및 중앙 스냅(Snap) 기능.

### 2\. 📐 길이 측정 (Reference Measure)

  * **비례식 측정 알고리즘:** AR 기능 없이 **참조 물체(신용카드 85.6mm, 동전)** 대비 픽셀 비율로 길이를 계산.
  * **2단계 측정 프로세스:** [1단계: 기준 물체 설정] → [2단계: 측정 대상 설정]을 통한 오차 최소화.
  * **카메라 연동:** 웹 브라우저에서 즉시 후면 카메라를 호출하여 촬영 및 분석.

### 3\. 🧭 웨이포인트 나침반 (Waypoint Compass)

  * **아날로그 나침반:** CSS 애니메이션을 활용한 부드러운 방위각(Azimuth) 회전.
  * **위치 기억(Waypoint):** 현재 위치를 타겟으로 저장하는 기능.
  * **내비게이션:** 이동 시 타겟 지점까지의 \*\*남은 거리(m)\*\*와 \*\*방향(초록 화살표)\*\*을 실시간 가이드 (조난 시 베이스캠프 복귀용).

### 4\. 🚀 속도계 & 지도 (GPS Tracker)

  * **하이브리드 UI:** 상단에는 **디지털 속도계**, 하단에는 **실시간 지도**를 배치.
  * **실시간 트래킹:** GPS 센서를 활용해 이동 속도(km/h) 변환 및 위도/경도 좌표 표시.
  * **오픈소스 지도:** API 키 없이 작동하는 **Leaflet.js (OpenStreetMap)** 적용 (다크 모드 지원).

### 5\. 🆘 비상 구조 도구 (Emergency Tool)

  * **3-in-1 통합 구조 신호:**
      * **손전등:** 후면 플래시(Hardware) + 화면 최대 밝기(Software) 동시 점등.
      * **사이렌:** 고주파 경고음(Wail) + 화면 경찰차 경광등 효과(Red/Blue).
      * **SOS:** 국제 표준 모스 부호(`... --- ...`) 박자에 맞춘 자동 점멸.
  * **안전장치(Safe Guard):** 당황스러운 상황에서 오작동을 막기 위해 **'화면 3회 연속 터치'** 시에만 기능이 종료됨.

-----

## 🛠 기술 스택 (Tech Stack)

  * **Frontend:** HTML5, CSS3, Vanilla JavaScript (ES6+)
  * **Map Library:** [Leaflet.js](https://leafletjs.com/) (v1.9.4)
  * **Icons:** Google Material Symbols Rounded
  * **Deployment:** GitHub Pages (HTTPS Required)

### 📱 활용된 웹 API (Web APIs)

| API 이름 | 용도 |
| :--- | :--- |
| `DeviceMotion` | 수평계 (중력 가속도 감지) |
| `DeviceOrientation` | 나침반 (지자기 센서 감지) |
| `Geolocation` | 속도계, 지도, 웨이포인트 거리 계산 |
| `MediaStream (Torch)` | 손전등 제어 (카메라 플래시) |
| `AudioContext` | 사이렌 및 비프음 생성 (Oscillator) |
| `Vibration API` | 햅틱 피드백 및 경고 진동 |

-----

## 📲 설치 및 실행 방법 (How to Run)

이 앱은 **PWA(Progressive Web App)** 방식으로, 별도의 설치 파일(.apk, .ipa)이 필요 없습니다.

1.  **GitHub Pages 배포:**

      * 이 저장소(Repository)를 포크(Fork)하거나 다운로드합니다.
      * GitHub Repository 설정(Settings) \> Pages에서 `main` 브랜치를 소스로 선택합니다.
      * 생성된 `https://username.github.io/...` 주소로 접속합니다.

    > **⚠️ 주의:** 스마트폰의 센서 권한은 \*\*보안 연결(HTTPS)\*\*에서만 작동하므로, 로컬 테스트 시에는 `localhost`를 사용하거나 배포해서 테스트해야 합니다.

2.  **권한 허용:**

      * 최초 접속 시 **[앱 시작하기]** 버튼을 누릅니다.
      * "동작 및 방향 접근", "위치 정보", "카메라(플래시용)" 권한 요청 팝업에서 \*\*[허용]\*\*을 선택해야 모든 기능이 정상 작동합니다.

-----

## ⚠️ 주의사항 및 문제 해결 (Troubleshooting)

  * **Q. 아이폰에서 진동이 안 울려요.**
      * iOS 사파리 정책상 웹사이트에서의 진동(`navigator.vibrate`)은 차단되어 있습니다. 대신 \*\*경고음(Beep)\*\*이 울리도록 설계되었습니다. 매너 모드를 해제해주세요.
  * **Q. SOS 사용 시 왜 카메라 권한을 묻나요?**
      * 웹 브라우저에서 손전등(Flash)을 켜기 위해서는 카메라 비디오 스트림의 `torch` 옵션을 제어해야 하기 때문입니다. **영상은 어디에도 저장되거나 전송되지 않습니다.**
  * **Q. 지도가 안 나와요.**
      * 실내에서는 GPS 신호가 약할 수 있습니다. 창가나 실외로 이동하여 테스트해 주세요.

-----

## 📜 라이선스 (License)

이 프로젝트는 **MIT License**를 따릅니다. 누구나 자유롭게 수정하고 배포할 수 있습니다.

  * **OpenStreetMap** data © OpenStreetMap contributors
  * **Google Material Icons** by Google

#최적화 된 프롬프트

"기존 Cordova 기반의 앱 코드를 설치 없이 웹 브라우저에서 바로 실행 가능한 GitHub Pages 호환 웹 앱으로 변환해줘."

"아이폰(iOS) 브라우저 정책상 센서 접근이 차단되는 문제를 해결하기 위해, 권한 요청(Permission Request) 버튼과 로직을 추가해줘."

"모바일 브라우저 주소창 때문에 하단 메뉴가 가려지지 않도록, 100dvh 및 Safe-area를 적용한 반응형 레이아웃을 잡아줘."

"파일 관리가 복잡하니 js 폴더 없이 index.html과 app.js 두 파일만으로 작동하도록 경로를 단순화해줘."

"브라우저 콘솔 오류 없이, HTTPS 환경에서 모든 센서(가속도, 자이로)가 정상적으로 초기화되는지 확인하는 진단 코드를 넣어줘."

"수평계가 단순히 기울기만 보여주는 것을 넘어, 현재 상태를 0도로 맞추는 0점 보정(Calibration) 기능을 추가해줘."

"수평이 맞았을 때(0.5도 이내) 시각적으로 명확히 알 수 있도록 물방울 색상을 변경하고 중앙 스냅(Snap) 효과를 적용해줘."

"어두운 곳이나 화면을 못 보는 상황을 대비해, 수평이 깨지면 진동과 소리로 알려주는 기울기 알림(Tilt Alarm) 기능을 넣어줘."

"벽면이나 기둥을 측정할 수 있도록, 폰을 세우면 자동으로 막대형(Bar) 수평계로 변환되는 기능을 구현해줘."

"자동 변환이 오히려 불편할 수 있으니, 상단에 탭을 만들어 원형(평면) / 가로 막대 / 세로 막대 모드를 수동으로 고정할 수 있게 해줘."

"막대형 모드에서 폰의 회전 방향(가로/세로)에 따라 측정 축(X/Y)이 자연스럽게 매칭되도록 축 센서 로직을 수정해줘."

"웹에서는 AR 측정이 어려우니, 신용카드나 동전을 기준 물체로 삼아 비례식으로 길이를 재는 참조 측정 알고리즘을 구현해줘."

"길이 측정 시 오차를 줄이기 위해, **[기준 물체 드래그] → [측정 대상 드래그]**의 2단계 프로세스로 UX를 변경해줘."

"나침반이 실제 방위와 반대로 도는 문제를 해결하고, CSS 애니메이션을 적용해 바늘이 부드럽게 회전하도록 해줘."

"나침반에 '현재 위치 기억' 버튼을 추가해, 이동 중에도 저장된 장소까지의 **남은 거리와 방향(초록 화살표)**을 실시간으로 안내해줘."

"방향 안내 시 Haversine 공식을 사용하여 GPS 좌표 간의 정확한 거리를 미터(m) 단위로 산출해줘."

"거리 정보가 나침반 UI를 가리지 않도록, 타겟 설정 시 나침반 크기가 자동으로 **축소(Shrink)**되는 인터랙션을 추가해줘."

"별도의 API 키 발급 없이 무료로 사용할 수 있는 Leaflet.js(오픈소스 지도) 라이브러리를 연동해줘."

"GPS 신호를 받아 실시간 이동 속도를 계산하고, m/s 단위를 km/h로 변환하여 표시해줘."

"지도 탭 진입 시 지도가 깨지거나 회색으로 나오는 현상을 막기 위해 강제 리사이즈(invalidateSize) 로직을 넣어줘."

"좁은 모바일 화면을 효율적으로 쓰기 위해, 지도를 전체 화면으로 깔고 속도계를 반투명 오버레이로 띄우는 UI로 변경해줘."

"야간 사용 시 눈부심을 방지하기 위해 지도 타일에 **다크 모드(Invert filter)**를 적용해줘."

"재난 상황을 대비해 **카메라 플래시(하드웨어)**와 화면 점멸(소프트웨어), 사이렌 소리가 통합된 SOS 기능을 만들어줘."

"단순 깜빡임이 아니라, 국제 표준 모스 부호 박자(... --- ...)에 맞춰 플래시가 자동으로 점멸되도록 타이머를 짜줘."

"아이폰 사파리 브라우저에서는 진동이 안 울리니, **고주파 비프음(Oscillator)**을 생성하여 경고음이 확실히 들리게 해줘."

"매너 모드나 브라우저 정책으로 소리가 막히는 것을 방지하기 위해, 버튼 클릭 시 오디오 컨텍스트를 강제로 깨우는 코드를 추가해줘."

"위급 상황에서 당황하여 실수로 끄는 것을 막기 위해, 화면을 빠르게 3번 터치해야만 기능이 종료되는 안전장치를 적용해줘."

"SOS 기능 작동 시 배터리 절약과 플래시 시인성 확보를 위해 화면 배경을 완전 검은색으로 처리해줘."

"기존의 이모티콘(📏, 🧭) 대신 Google Material Symbols를 적용하여, 실제 스토어에 등록된 앱처럼 전문적인 UI로 업그레이드해줘."

"모든 기능(수평, 측정, 나침반, 지도, SOS)이 하나의 app.js 파일 안에서 충돌 없이 유기적으로 작동하도록 최종 코드를 통합 및 최적화해줘."
